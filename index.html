<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Gems | Nam Kim</title>
  <!-- Reference to css file -->
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  <!-- Jquery -->
  <script src="https:code.jquery.com/jquery-2.2.3.js" integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4=" crossorigin="anonymous"></script>

</head>

<body>

  <div id="title" style="background: yellow">Crystals Collector!</div>
  <!-- Instructions -->
  <div id="howtoplay" style="background: green">
     <p>
       * The player will be shown a random number at the start of the game.
     </p>

     <p>
       * When the player clicks on a crystal, it will add a specific amount
         of points to the player's total score.
     </p>

     <p>
       * Your game will hide this amount until the player clicks a crystal.
     </p>

     <p>
       * When they do click one, update the player's score counter.
     </p>

     <p>
       * The player wins if their total score matches the random number from the beginning of the game.
     </p>

     <p>
       * The player loses if their score goes above the random number.
     </p>

     <p>
       * The game restarts whenever the player wins or loses.
     </p>

     <p>
       * When the game begins again, the player should see a new random number. Also,
             all the crystals will have four new hidden values. Of course, the user's score
             (and score counter) will reset to zero.
     </p>

     <p>
       * The app should show the number of games the player wins and loses. To that end,
         do not refresh the page as a means to restart the game.
     </p>

  </div>

  <!-- Score to beat, user score so far display area -->
  <div id="score_container">

        <div id="scoretomatch"></div>
        <div id="totalscore"></div>

  </div>

  <!-- Win and loss counts display area -->
  <div id="winsandlosses" style="background: pink"></div>

  <!-- Contains crystal images -->
  <div id="crystal_container"></div>


    <!-- Start Script -->
    <script type="text/javascript">

    $(document).ready(
      function(){

        // Initialize Variables
        var Scoretobeat;
        var userScore;
        var crystalValues = [0,0,0,0];
        var crystalImageLinks = ["assets/images/jewel1.JPG", "assets/images/jewel2.JPG", "assets/images/jewel3.JPG", "assets/images/jewel4.JPG"]
        var win_count = 0;
        var loss_count = 0;

        //jquery declarations for image crystals with attributes
        var imageCrystal1 = $('<img>');
        imageCrystal1.attr(
            'src',
            crystalImageLinks[0]
        );
        imageCrystal1.attr('alt', 'crystals');
        imageCrystal1.addClass('crystalImage');
        $('#crystal_container').append(imageCrystal1);


        var imageCrystal2 = $('<img>');
        imageCrystal2.attr(
            'src',
            crystalImageLinks[1]
        );
        imageCrystal2.attr('alt', 'crystals');
        imageCrystal2.addClass('crystalImage');
        $('#crystal_container').append(imageCrystal2);



        var imageCrystal3 = $('<img>');
        imageCrystal3.attr(
            'src',
            crystalImageLinks[2]
        );
        imageCrystal3.attr('alt', 'crystals');
        imageCrystal3.addClass('crystalImage');
        $('#crystal_container').append(imageCrystal3);



        var imageCrystal4 = $('<img>');
        imageCrystal4.attr(
            'src',
            crystalImageLinks[3]
        );
        imageCrystal4.attr('alt', 'crystals');
        imageCrystal4.addClass('crystalImage');
        $('#crystal_container').append(imageCrystal4);




        //Reset function for new values
        function newGame () {

            //assigns a random integer from [19 - 120]
            Scoretobeat = Math.floor(Math.random() * (120-19+1)) + 19;

            //resets user score to 0
            userScore = 0;

            //prints out current user score, win/loss counts, and score to match
            document.querySelector("#totalscore").innerHTML = "<h2>Current score: </h2>" + userScore;
            $("#winsandlosses").html("<h2>Wins: </h2>" + win_count + "<br>" + "<h2>Losses: </h2>" + loss_count);
            $("#scoretomatch").html("<h2>Score to match: </h2>" + Scoretobeat);


            for (var i = 0; i < 4; i++) {
              //assigns a random integer from [1-12], storing in an array for each crystal
              crystalValues[i] = Math.floor(Math.random() * (12-1+1)) + 1;

            }

            //randomizes the value of each crystal
            imageCrystal1.attr('data-num', crystalValues[0]);
            imageCrystal2.attr('data-num', crystalValues[1]);
            imageCrystal3.attr('data-num', crystalValues[2]);
            imageCrystal4.attr('data-num', crystalValues[3]);




            console.log(Scoretobeat, userScore, crystalValues);

        }


        //initialize game
        newGame();





              // Onclick functionality
              $('.crystalImage').on(
                'click', function() {

                  //adds score on each click
                  userScore = userScore + parseInt($(this).attr('data-num'));
                  console.log(userScore);


                  //updates the current user score
                  document.querySelector("#totalscore").innerHTML = "<h2>Current score: </h2>" + userScore;

                      //conditions for new game, update win/loss counts
                      if (userScore === Scoretobeat) {
                        alert('You won');
                        win_count++;
                        newGame();
                      } else if (userScore > Scoretobeat) {
                        alert('You lost!');
                        loss_count++;
                        newGame();
                      }

                }
              )

              console.log("wins: " + win_count +"|" + "losses: " + loss_count);









        $("#winsandlosses").html("<h2>Wins: </h2>" + win_count + "<br>" + "<h2>Losses: </h2>" + loss_count);
        $("#scoretomatch").html("<h2>Score to match: </h2>" + Scoretobeat);












      }
    )








</script>


</body>


</html>
